<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Sorteo de Jurados</title>
</head>

<body>
    <h1>Sorteo de Jurados</h1>

    <!-- Formulario para seleccionar grado y fase del sorteo -->
    <form method="post" action="{{ url_for('sorteo_jurados') }}">
        <label for="grado">Seleccionar Grado:</label>
        <select id="grado" name="grado" required {% if fase_1_completado %}disabled{% endif %}>
            {% for grado in grados %}
            <option value="{{ grado }}" {% if grado==grado_especifico %}selected{% endif %}>{{ grado }}</option>
            {% endfor %}
        </select><br>

        <!-- Botones para las fases del sorteo -->
        <button type="submit" name="fase" value="Iniciar Primer Sorteo" {% if fase_1_completado %}disabled{% endif
            %}>Simulacro 1</button>
        <button type="submit" name="fase" value="Realizar Segundo Sorteo" {% if not fase_1_completado or
            fase_2_completado %}disabled{% endif %}>Simulacro 2</button>
        <button type="submit" name="fase" value="Realizar Sorteo Definitivo" {% if not fase_2_completado or
            fase_3_completado %}disabled{% endif %}>Sorteo Final</button>
    </form>

    <!-- Mostrar Sorteos -->
    <h2>Sorteos Realizados</h2>
    {% if sorteos %}
    <table>
        <thead>
            <tr>
                <th>Mesa Número</th>
                <th>Estudiantes</th>
                <th>Profesor</th>
                <th>Remanente</th>
            </tr>
        </thead>
        <tbody>
            {% for sorteo in sorteos %}
            <tr>
                <td>{{ sorteo.mesa_numero }}</td>
                <td>
                    <ul>
                        {% for estudiante in sorteo.estudiantes %}
                        <li>{{ estudiante.nombre }} ({{ estudiante.numero_documento }} {{sorteo.grado}}-{{
                            sorteo.seccion }})</li>
                        {% endfor %}
                    </ul>
                </td>
                <td>{{ sorteo.profesor.nombre }} ({{ sorteo.profesor.numero_documento }})</td>
                <td>{{ sorteo.remanente.nombre }} ({{ sorteo.remanente.numero_documento }} {{sorteo.grado}}-{{
                    sorteo.seccion }})</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <p>No se han realizado sorteos todavía.</p>
    {% endif %}
</body>

</html>